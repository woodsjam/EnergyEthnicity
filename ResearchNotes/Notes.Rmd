Research Notes for Housing Market Institutions Drive Race and Ethnicity Differences in Energy Consumption
========================================================

Load in the raw data.
```{r}
RECS <- read.csv("~/Research/EnergyEthnicity/Data/recs2009_public.csv")

summary(RECS)

```

Lots of recodes in there.

```{r}
library(plyr)
#ID
RECS$DOEID<-as.factor(RECS$DOEID)  

#Region
RECS$REGIONC<-revalue(as.factor(RECS$REGIONC),c("1"="NE", "2"="MidWest","3"="South","4"="West"))

#Type of Structure
RECS$TYPEHUQ<-revalue(as.factor(RECS$TYPEHUQ), c("1"="Mobile", "2"="SFDetached", "3"="SFAttached", "4"="SmApartment", "5"="LgApartment"))

#Climate zone
RECS$Climate_Region_Pub<-revalue(as.factor(RECS$Climate_Region_Pub),c("1"="VColdCold","2"="HotDryMixedDry","3"="HotHumid","4"="MixedHumid","5"="Marine"))

#Urban vs Rural
RECS$UR<-revalue(as.factor(RECS$UR), c("U"="Urban","R"="Rural"))

RECS$KOWNRENT<-revalue(as.factor(RECS$KOWNRENT),c("1"="Own","2"="Rent","3"="Free"))

#Year Built
summary(RECS$YEARMADE)

#Moved in
RECS$OCCUPYYRANGE<-revalue(as.factor(RECS$OCCUPYYRANGE),c("1"="Pre50", "2"="5059","3"="6069","4"="7079","5"="8089","6"="9099", "7"="0004","8"="0509"))

#Bedrooms
RECS$BEDROOMS[RECS$BEDROOMS==-2]<-NA
summary(RECS$BEDROOMS)

#Working with cooking end use
summary(RECS$STOVEN)
summary(RECS$STOVE)
summary(RECS$OVEN)
#Stove and oven fuel are only reported if separate

RECS$CookTopElectric<-FALSE
RECS$CookTopElectric[RECS$STOVENFUEL=='5' | RECS$STOVEFUEL=='5' ]<-TRUE

RECS$OvenElectric<-FALSE
RECS$OvenElectric[RECS$STOVENFUEL=='5' | RECS$OVENFUEL=='5' ]<-TRUE

#Just indicating that that cook with electricity
summary(RECS$CookTopElectric)
summary(RECS$OvenElectric)

#How much they use it
RECS$NUMMEAL<-revalue(as.factor(RECS$NUMMEAL),c("0"="Never","1"="ThreeDay","2"="TwoDay", "3"="OneDay", "4"="FewWeek","5"="OneWeek","6"="LessWeek"))

#this is better on cooking fuel.  Don't use the separate oven and cook top from above
RECS$ELectricCook<-FALSE
RECS$ELectricCook[RECS$FUELFOOD=="5"]<-TRUE

#Number of fridges.  Watch out for those with more than 4.
table(RECS$NUMFRIG)

#age of fridge
RECS$AgeFridge<-revalue(as.factor(RECS$AGERFRI1), c("1"="Less2", "2"="2to4Years", "3"="5to9Years","41"="10to14Years","42"="15to19Years","5"="20PlusYears","-2"=NA))

summary(RECS$AgeFridge)

#Has Dishwasher
RECS$DishwaherTrue<-revalue(as.factor(RECS$DISHWASH),c("0"=TRUE, "1"=FALSE))

RECS$WASHLOAD<-revalue(as.factor(RECS$WASHLOAD),c("1"="1Less","2"="2to4Loads","3"="5to9Loads","4"="10to15Loads","5"="15PlusLoads","-2"=NA))

RECS$DRYER<-revalue(as.factor(RECS$DRYER), c("0"=FALSE,"1"=TRUE))

RECS$DRYRFUEL<-revalue(as.factor(RECS$DRYRFUEL), c("1"="NG","2"="LPG","5"="Elec","-2"=NA))

##Start Recoding HERE
summary(RECS$AGECDRYER)
summary(RECS$TVCOLOR)
summary(RECS$TVTYPE1)
summary(RECS$TVONWD1)
summary(RECS$NUMPC)
summary(RECS$TIMEON1)
summary(RECS$WELLPUMP)
summary(RECS$EQUIPM)
summary(RECS$FUELHEAT)
summary(RECS$EQUIPAGE)
summary(RECS$TEMPHOME)
summary(RECS$TEMPGONE)
summary(RECS$TEMPNITE)
summary(RECS$H2OTYPE1)
summary(RECS$FUELH2O)
summary(RECS$WHEATSIZ)
summary(RECS$WHEATAGE)
summary(RECS$AIRCOND)
summary(RECS$COOLTYPE)
summary(RECS$CENACHP)
summary(RECS$AGECENAC)
summary(RECS$USECENAC)
summary(RECS$TEMPHOMEAC)
summary(RECS$TEMPGONEAC)
summary(RECS$TEMPNITEAC)
summary(RECS$NUMBERAC)
summary(RECS$WWACAGE)
summary(RECS$ESWWAC)
summary(RECS$USEWWAC)
summary(RECS$SWIMPOOL)
summary(RECS$POOL)
summary(RECS$FUELPOOL)
summary(RECS$RECBATH)
summary(RECS$FUELTUB)
summary(RECS$TYPEGLASS)
summary(RECS$ELCOOL)
summary(RECS$ELWARM)
summary(RECS$ELWATER)


summary(RECS$ELFOOD)

#May need to do some editing on this.  Low values are too low
summary(RECS$KWH)/12

#This is the sqft variable to use
summary(RECS$TOTSQFT_EN)

#Get income working two ways
#MONEYPY 
RECS$MONEYPY<-revalue(as.factor(RECS$MONEYPY),c("1"="Less2500", "2"="Less5K", "3"="Less7500","4"="Less10K","5"="Less15K","6"="Less20K","7"="Less25K","8"="Less30K", "9"="Less35K","10"="Less40K","11"="Less45K","12"="Less50K","13"="Less55K","14"="Less60","15"="Less65","16"="Less70","17"="Less75","18"="Less80", "19"="Less85", "20"="Less90","21"="Less95","22"="Less100K","23"="Less120K","24"="Gr120K"))
summary(RECS$MONEYPY)


RECS$RENTHELP<-revalue(as.factor(RECS$RENTHELP),c("0"=FALSE, "1"=TRUE, "-2"=FALSE))
summary(RECS$RENTHELP)

RECS$FOODASST<-revalue(as.factor(RECS$FOODASST),c("0"=FALSE, "1"=TRUE))
summary(RECS$FOODASST)

#Age of HH looks ok
summary(RECS$HHAGE)

#number of people
summary(RECS$NHSLDMEM)

#Ed level of HH
RECS$EDUCATION<-revalue(as.factor(RECS$EDUCATION),c("0"="None","1"="NoHS","2"="HS","3"="SomeCol","4"="AA","5"="BA", "6"="MA", "7"="Prof", "8"="PHD"))
summary(RECS$EDUCATION)


#HH Race
RECS$Householder_Race<-revalue(as.factor(RECS$Householder_Race),c("1"="Wt","2"="AfAm","3"="NativeAm","4"="Asian","5"="Pacific", "6"="Other", "7"="Multi"))
summary(RECS$Householder_Race)

#Hispanic
RECS$Hispanic<-FALSE
RECS$Hispanic[RECS$SDESCENT=="1"]<-TRUE
summary(RECS$Hispanic)

#Need state ie REPORTABLE_DOMAIN


```
Checkign out the weight variable
```{r}
summary(RECS$NWEIGHT)

```
Looks like it is the number of equivelent HH in population style.

Looking at weather
```{r}
summary(RECS$HDD65)
summary(RECS$CDD65)

```
Nothing odd.


This is the data ME created from the HUD report on the number of complaints per 100K population

```{r}
HUD <- read.csv("~/Research/EnergyEthnicity/Data/HUD.csv")

#And the clean up from importing from excell
HUD$pop<-as.numeric(gsub(",","",HUD$pop))
summary(HUD)
```



```{r}
as.numeric(HUD$Pop)
```


